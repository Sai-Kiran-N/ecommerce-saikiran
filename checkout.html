<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Checkout - Get Deal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="./images/icon.png">
  </head>

  <body onload='initializing()'>
      <nav>
        <section id='head'>
          <a href='home.html'><img src="./images/logo.png" width=40px height=40px style="margin:5px 0 0 5px" alt="Image not found"></a>
          <h1 style='margin:12px;'><a href='home.html'>GET DEAL</a></h1>
          <i class="fa badge" id='cart' style="font-size:40px" value=0><a href='cart.html'>&#xf07a;</a></i>
        </section>
        <hr style="margin:0px">
      </nav>

      <section style='margin:80px 3% auto 3%' >
        <h1 style='color:#fa0707;text-align:center;margin-bottom:0px;'>Billing Items</h1>

        <div class="" id='billing'>
            <form class="" action="home.html" id='form_data' onsubmit='return form_submit()' method="post" >
              <pre style='margin-top:0px;' id='form'>
                <u><h3>Personal Information</h3></u>
  <!--  -->     Name         : <input type="text" name="name" value="" required placeholder="Enter Name" autofocus><br>
  <!--  -->     Email        : <input type="email" id='email' name="email" value="" placeholder="Enter Email" required><br>
  <!--  -->     Phone        : <input type="text" name="phone" value="" pattern="\d{10}" title="phone number should be 10digits only" placeholder="Enter 10 digit phone number" required><br>
  <!--  -->     Address      : <input type="text" name="address" value="" placeholder="Enter Address" required><br>
  <!--  -->     Landmark     : <input type="text" name="landmark" value="" placeholder="Enter Landmark" required><br>
  <!--  -->     Zip/Pincode  : <input type="text" name="code" value="" pattern="\d{4,6}" title='It should be 4 to 6 digits' placeholder="Enter Zip/Pincode" required>
  <!--  -->     <u><h3>Payment Information</h3></u>
  <!--  -->     Card Number  : <input type="text" name="card" placeholder="Enter Card Number" pattern="\d{12,16}" title='It should be 12 to 16 digits' value="" required><br>
  <!--  -->     CVV Code     : <input type="text" name="cvv" value="" placeholder="Enter CVV code" pattern="\d{3}" title='Accepts only 3 digits' required><br>
  <!--  -->     Name on Card : <input type="text" name="name on card" value="" placeholder="Enter Name on card" required><br>
  <!--  -->     Expiry Date  : <input type="month" name="date" value="" placeholder="Enter Date" required><br>
                <input type="submit" id='submit' style='visibility:hidden' name="" value="">
              </pre>
            </form>

          <form class="" id='cart_list' >
              <u><h3>Order Summary</h3></u>
          </form>
        </div>

        <section style="margin-top:0;">

        </section>
      </section><br><br>



      <footer>
        <section id='footer' style="position:fixed;width:100%;bottom:0">
            <h3 style='margin:3px'><a href='home.html'>GET DEAL</a></h3>
            <h3 style='margin:3px'>INDIA</h3>
            <h3 style='margin:3px'>By Sai Kiran Nalamothu</h2>
        </section>
      </footer>


  </body>

  <script type="text/javascript">
      if(!('cart' in localStorage))
      {
        localStorage['cart']=0;
      }
      if(!('cart_items' in localStorage))
      {
        localStorage['cart_items']=JSON.stringify({});
      }
      if(!('buy_items' in localStorage))
      {
        localStorage['buy_items']=JSON.stringify({});
      }

      var total_price=0;
      var keys=Object.keys(JSON.parse(localStorage['buy_items']));
      function initializing()
      {
          document.getElementById('cart').getAttributeNode('value').value=localStorage['cart'];
          var buy_items=JSON.parse(localStorage['buy_items']);
          if(Object.keys(buy_items).length!=0)
          {
            for(var index=0; index<keys.length; index+=1)
            {
              var tag=document.createElement('h1');
              tag.id=index;
              document.getElementById('cart_list').appendChild(tag);
              var data=keys[index].split(',');
              var start_index=data[0].lastIndexOf('/');
              //tag.style.textAlign='center';
              tag.style.color='maroon';              
              //tag.style.border='2px solid #0ad2fa';
              tag.style.display='inline-block';
              tag.style.padding='5px';
              tag.style.fontSize='15px';
              tag.innerHTML = (index + 1) + '. ' + data[0].substring(start_index + 1) + '&nbsp;&nbsp;&nbsp;';
              var tag1 = document.createElement('h1');
              tag1.className='samp5';
              tag1.style.fontSize = '15px';
              tag1.innerHTML= 'Price : ' + data[1] + ';&nbsp;&nbsp;&nbsp;' + 'No of Items : ' + buy_items[keys[index]] + '<br>'; 
              tag.appendChild(tag1);
              total_price=total_price+(parseInt(data[1].substring(1))*parseInt(buy_items[keys[index]]));
              document.getElementById('cart_list').appendChild(document.createElement('br'));
            }
            var tag1=document.createElement('h3');
            tag1.innerHTML='Total Price : â‚¹'+total_price+'&nbsp;&nbsp;';
            tag1.style.display='inline-block';
            tag1.style.color='#b01ca1';
            tag1.id='total_price';
            document.getElementById('cart_list').appendChild(tag1);
            var tag=document.createElement('input');
            tag.id='pay_now';
            tag.setAttribute('onclick','buy_now()');
            tag.style.fontSize='20px';
            tag.type='button';
            tag.setAttribute('value','PAY NOW');
            tag.style.background='#b01ca1';
            tag.style.color='#f5edf4';
            tag.style.width='120px';
            tag.style.height='40px';
            tag.style.cursor='pointer';
            document.getElementById('cart_list').appendChild(document.createElement('br'));
            document.getElementById('cart_list').appendChild(document.createElement('br'));
            document.getElementById('cart_list').appendChild(tag);
          }
          else
          {
              document.getElementById('cart_list').innerHTML='<h1>No items in the Cart</h1>';
          }
        }

        function buy_now()
        {
          document.getElementById('submit').click();
        }

        function form_submit()
        {
          var value=confirm('Please confirm payment by clicking OK');
          if(value)
          {
            value=confirm('Do you want to clear items in the cart');
            if(value)
            {
              localStorage['cart']=0;
              localStorage['cart_items']=JSON.stringify({});
              localStorage['buy_items']=JSON.stringify({});
            }
            alert('Congrats, Order Placed successfully');
            location.replace('home.html');
          }

          return false;
        }

  </script>

</html>
